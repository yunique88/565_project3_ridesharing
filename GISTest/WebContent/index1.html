<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
<title>Welcome to Rider Share!</title>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
<link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>

<script type="text/javascript">
	$(function() {
		$("#tabs").tabs();
	});

	function loadUserInfo() {
		$.post("UserManagement", {
			"operation": "query",
			"userID" : $("#userID").val()
		}).success(function(data) {
			console.log(data);
			$('#result').html(data);
		}).fail(function(data) {
			console.log('failed ' + data);
		});
	}
	
	function queryRoute() {
		console.log($("#traceName").val());
		$.post("QueryRoute", {
			"traceName" : $("#traceName").val()
		}).success(function(data) {
			console.log(data);
			//calculateAndDisplayRoute(directionsService, directionsDisplay);
		}).fail(function(data) {
			console.log(data);
			$("#result").html("Failed");
		});
	}
</script>

<style>
html, body {
	height: 100%;
	margin: 0;
	padding: 0;
}

#map {
	height: 800px;
	width: 600px;
}
</style>

<script>
	function initMap() {
		var directionsService = new google.maps.DirectionsService;
		var directionsDisplay = new google.maps.DirectionsRenderer;

		var map = new google.maps.Map(document.getElementById('map'), {
			zoom : 7,
			center : {
				lat : 47.608931,
				lng : -122.257249
			}
		});

		directionsDisplay.setMap(map);

		var onChangeHandler = function() {
			calculateAndDisplayRoute(directionsService, directionsDisplay);
		};
	}

	function calculateAndDisplayRoute(directionsService, directionsDisplay, start, end) {
		var waypts = [];
		waypts.push({
			location : new google.maps.LatLng(47.650270, -122.301835)
		});

		directionsService.route({
			origin :
			new google.maps.LatLng(47.650270, -122.301835),
			destination :
			new google.maps.LatLng(47.244568, -122.437594),
			//waypoints: waypts,
			travelMode : google.maps.TravelMode.DRIVING
		}, function(response, status) {
			if (status === google.maps.DirectionsStatus.OK) {
				console.log(response);
				directionsDisplay.setDirections(response);
			} else {
				window.alert('Directions request failed due to ' + status);
			}
		});
	}
</script>

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDjvAlMik-LMCY8hr7dX9lrCzAunKyfzQk&signed_in=true&callback=initMap" async defer></script>
</head>

<body>
<br>
Enter your user ID: <input id='userID' placeholder='Enter Your UserID' />
<input type='button' value='Login' onClick='loadUserInfo()' />
<br>
<div id="tabs">
<ul>
<li><a href="#tabs-1">User Info</a></li>
<li><a href="#tabs-2">My Route Info</a></li>
<li><a href="#tabs-3">Search Route</a></li>
</ul>
<div id="tabs-1">
UserID: <div id='result'></div>
</div>
<div id='tabs-2'></div>
<div id="tabs-3">
<div id='map'></div>
</div>
</div>
</body>
</html>